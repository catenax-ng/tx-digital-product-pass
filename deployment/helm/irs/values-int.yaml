#################################################################################
# Catena-X - Product Passport Consumer Application
#
# Copyright (c) 2022, 2023 BASF SE, BMW AG, Henkel AG & Co. KGaA
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
# either express or implied. See the
# License for the specific language govern in permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
#################################################################################

### The fully configuration is available in https://github.com/eclipse-tractusx/item-relationship-service/tree/main/charts/irs-helm

---

irs-helm:
  enabled: true
  bpn: <path:material-pass/data/int/edc/participant#bpnNumber>

  nameOverride: "dpp-irs"
  fullnameOverride: "dpp-irs"

  # namespace: product-material-pass

  irsUrl: "https://materialpass-irs.int.demo.catena-x.net"

  ingress:
    enabled: true
    annotations:
      ingressClassName: nginx
      nginx.ingress.kubernetes.io/backend-protocol: HTTP
      nginx.ingress.kubernetes.io/force-ssl-redirect: 'true'
      nginx.ingress.kubernetes.io/ssl-passthrough: 'false'
    hosts:
      - host: "materialpass-irs.int.demo.catena-x.net"
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - "materialpass-irs.int.demo.catena-x.net"
        secretName: tls-secret

  digitalTwinRegistry:
    type: decentral
    url: https://materialpass.int.demo.catena-x.net/semantics/registry/api/v3.0
    discoveryFinderUrl: https://semantics.int.demo.catena-x.net/discoveryfinder/api/administration/connectors/discovery/search
  semanticshub:
    url: https://semantics.int.demo.catena-x.net/hub/api/v1/models
  bpdm:
    url: https://partners-pool.int.demo.catena-x.net
    bpnEndpoint: >-
      {{- if .Values.bpdm.url }}
      {{- tpl (.Values.bpdm.url | default "") . }}/api/catena/legal-entities/{partnerId}?idType={idType}
      {{- end }}

  minioUser: <path:material-pass/data/int/irs/minio#user>
  minioPassword: <path:material-pass/data/int/irs/minio#password>
  minioUrl: "http://{{ .Release.Name }}-minio:9000"

  keycloak:
    oauth2:
      clientId: <path:material-pass/data/int/irs/keycloak/oauth2#clientId>
      clientSecret: <path:material-pass/data/int/irs/keycloak/oauth2#clientSecret>
      clientTokenUri: https://centralidp.int.demo.catena-x.net/auth/realms/CX-Central/protocol/openid-connect/token
      jwkSetUri: https://centralidp.int.demo.catena-x.net/auth/realms/CX-Central/protocol/openid-connect/certs
  # portal:
  #   oauth2:
  #     clientId:  # <portal-client-id>
  #     clientSecret:  # <portal-client-secret>

  edc:
    controlplane:
      endpoint:
        data: https://materialpass.int.demo.catena-x.net/consumer/management
      apikey:
        secret: <path:material-pass/data/int/edc/oauth#api.key>

  minio:
    nameOverride: "dpp-irs-minio"
    fullnameOverride: "dpp-irs-minio"
    serviceAccount:
      create: false
    rootUser: <path:material-pass/data/int/irs/minio#user>
    rootPassword: <path:material-pass/data/int/irs/minio#password>
